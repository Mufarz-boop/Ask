{% extends 'base.html' %}
{% block title %}Blog{% endblock %}

{% block content %}
<div class="container py-5">

  <!-- Header -->
  <h1 class="text-center mb-5 fw-bold text-gradient display-4">Blog</h1>

  <!-- Grid Blog -->
  <div class="row g-4">
    {% for post in posts %}
    <div class="col-6 col-md-4">
      <div class="card blog-card shadow-lg border-0 rounded-4 h-100 overflow-hidden position-relative">
        <!-- Image -->
        <img src="{{ url_for('static', filename='image/' ~ post.image) }}" 
             class="card-img-top object-fit-cover" 
             alt="{{ post.title }}" style="height:250px;">

        <!-- Overlay -->
        <div class="overlay position-absolute top-0 start-0 w-100 h-100 bg-dark bg-opacity-0 d-flex flex-column justify-content-end p-3 text-light transition">
          <h5 class="mb-1 fw-bold">{{ post.title }}</h5>
          <small>{{ post.short_desc }}</small>
        </div>

        <!-- Card body -->
        <div class="card-body">
          <p class="text-muted mb-2"><i class="bi bi-calendar-event me-1"></i> {{ post.date }}</p>
          <p class="card-text preview">{{ post.short_desc }}</p>
          <button class="btn btn-outline-primary mt-2 toggle-content">Read More</button>
          <div class="full-content d-none mt-2">{{ post.full_content }}</div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

</div>
{% endblock %}

{% block scripts %}
<script>
  // Hover effect overlay
  document.querySelectorAll('.blog-card').forEach(card => {
    card.addEventListener('mouseenter', () => {
      const overlay = card.querySelector('.overlay');
      overlay.style.backgroundColor = 'rgba(0,0,0,0.5)';
    });
    card.addEventListener('mouseleave', () => {
      const overlay = card.querySelector('.overlay');
      overlay.style.backgroundColor = 'rgba(0,0,0,0)';
    });
  });

  // Toggle Read More
  document.querySelectorAll('.toggle-content').forEach(btn => {
    btn.addEventListener('click', function(){
      const card = this.closest('.card-body');
      const full = card.querySelector('.full-content');
      if(full.classList.contains('d-none')){
        full.classList.remove('d-none');
        this.innerText = 'Read Less';
      } else {
        full.classList.add('d-none');
        this.innerText = 'Read More';
      }
    });
  });
</script>
{% endblock %}